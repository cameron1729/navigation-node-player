# Navigation node player
This script is designed to "play" a sequence of text files generated by the navigation node debugging code added in [MDL-83100](https://tracker.moodle.org/browse/MDL-83100).

![](example.gif)

# How to use it
First, generate some "frames" to play via Moodle. You will need to have [MDL-83100](https://tracker.moodle.org/browse/MDL-83100) checked out). Once checked out and upgraded:

1. Browse to _Site administration_ > _Development_ > _Experimental_ > _Experimental settings_
2. Enable the _Enable navigation node debugging_ setting
3. Browse to the specific page you want to debug, for example http://[YOUR_MOODLE]/mod/quiz/view.php?id=1729
4. Append the debugnav=1 parameter to the URL, e.g., http://[YOUR_MOODLE]/mod/quiz/view.php?id=1729&debugnav=1
5. Once the page loads, navigations "frames" will be available in your Moodle site's tempdir (i.e., whatever $CFG->tempdir is set to) in the directory _navdebug_. The folders in this directory are timestamps, so the most recent debugging run will be in the most recent folder.
6. `cd` in to the appropriate directory
7. Run `play_tree_frames`

# Helpful hints
* The output is big, make your terminal font really small to see everything
* Use <kbd>←</kbd> and <kbd>→</kbd> to move forward and backwards
* Press <kbd>S</kbd> to see a stack trace
* Press <kbd>:</kbd> then enter a frame number when prompted followed by <kbd>Enter</kbd>, to navigate to that specific frame
* Press <kbd>H</kbd> and then enter some text to highlight when prompted followed by <kbd>Enter</kbd>, any instances of that text will be highlighted
* Nodes are presented in the following format (using the myprofile node as an example): myprofile (id: 357 type: 80 parent: 344 ncid: 351)
    * id is the value of spl_object_id
    * type is just the node type
    * parent is the spl_object_id of the parent node reference
    * ncid is the spl_object_id of the node collection reference used to store children
    * If the node is currently active, a * will be printed next to it (you won't see that in this specific example though)
* The trees print with "placeholder" classes until the real class exists
* If a node does not have a key set, it will show like `?class\of\the\node`
